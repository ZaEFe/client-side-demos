import"./useBootstrap-B5thChz7.js";import{j as s,c as R,r as m}from"./index-ByYvoH3u.js";const V=()=>s.jsx("nav",{className:"navbar navbar-expand-lg bg-dark",children:s.jsxs("div",{className:"container-fluid d-flex justify-content-between",children:[s.jsxs("div",{className:"d-flex align-items-center",children:[s.jsx("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:s.jsx("span",{className:"navbar-toggler-icon"})}),s.jsx("a",{className:"navbar-brand d-lg-none ms-2",href:"../../",children:"Home Page"})]}),s.jsx("div",{className:"collapse navbar-collapse",id:"navbarNav",children:s.jsxs("ul",{className:"navbar-nav",children:[s.jsx("li",{className:"nav-item",children:s.jsx("a",{className:"nav-link active","aria-current":"page",href:"../../",children:"Home"})}),s.jsx("li",{className:"nav-item",children:s.jsx("a",{className:"nav-link",href:"../about/",children:"About"})}),s.jsx("li",{className:"nav-item",children:s.jsx("a",{className:"nav-link",href:"../clock/",children:"Clock"})}),s.jsx("li",{className:"nav-item",children:s.jsx("a",{className:"nav-link",href:"../project-2/",children:"Date Button"})}),s.jsx("li",{className:"nav-item",children:s.jsx("a",{className:"nav-link",href:"../react/",children:"React: Animal List"})}),s.jsx("li",{className:"nav-item",children:s.jsx("a",{className:"nav-link",href:"../todo/",children:"To Do List"})}),s.jsx("li",{className:"nav-item",children:s.jsx("a",{className:"nav-link",href:"../simple_fetch/",children:"Simple Fetch API"})}),s.jsx("li",{class:"nav-item",children:s.jsx("a",{class:"nav-link",href:"../local_fetch/",children:"Local Fetch API"})}),s.jsx("li",{class:"nav-item",children:s.jsx("a",{class:"nav-link",href:"../jeopardy_app/",children:"Jeopardy App"})})]})}),s.jsx("a",{className:"navbar-brand ms-auto",href:"./",children:s.jsx("img",{src:"/logo.svg",alt:"Logo",width:"30",height:"24"})})]})}),D=(e,t)=>t.some(n=>e instanceof n);let S,C;function O(){return S||(S=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function W(){return C||(C=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const I=new WeakMap,y=new WeakMap,v=new WeakMap;function K(e){const t=new Promise((n,r)=>{const c=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{n(x(e.result)),c()},o=()=>{r(e.error),c()};e.addEventListener("success",i),e.addEventListener("error",o)});return v.set(t,e),t}function _(e){if(I.has(e))return;const t=new Promise((n,r)=>{const c=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{n(),c()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),c()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)});I.set(e,t)}let N={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return I.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return x(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function T(e){N=e(N)}function H(e){return W().includes(e)?function(...t){return e.apply(E(this),t),x(this.request)}:function(...t){return x(e.apply(E(this),t))}}function U(e){return typeof e=="function"?H(e):(e instanceof IDBTransaction&&_(e),D(e,O())?new Proxy(e,N):e)}function x(e){if(e instanceof IDBRequest)return K(e);if(y.has(e))return y.get(e);const t=U(e);return t!==e&&(y.set(e,t),v.set(t,e)),t}const E=e=>v.get(e);function $(e,t,{blocked:n,upgrade:r,blocking:c,terminated:i}={}){const o=indexedDB.open(e,t),u=x(o);return r&&o.addEventListener("upgradeneeded",a=>{r(x(o.result),a.oldVersion,a.newVersion,x(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),u.then(a=>{i&&a.addEventListener("close",()=>i()),c&&a.addEventListener("versionchange",l=>c(l.oldVersion,l.newVersion,l))}).catch(()=>{}),u}const G=["get","getKey","getAll","getAllKeys","count"],J=["put","add","delete","clear"],w=new Map;function k(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(w.get(t))return w.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,c=J.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(c||G.includes(n)))return;const i=async function(o,...u){const a=this.transaction(o,c?"readwrite":"readonly");let l=a.store;return r&&(l=l.index(u.shift())),(await Promise.all([l[n](...u),c&&a.done]))[0]};return w.set(t,i),i}T(e=>({...e,get:(t,n,r)=>k(t,n)||e.get(t,n,r),has:(t,n)=>!!k(t,n)||e.has(t,n)}));const Z=["continue","continuePrimaryKey","advance"],A={},B=new WeakMap,L=new WeakMap,z={get(e,t){if(!Z.includes(t))return e[t];let n=A[t];return n||(n=A[t]=function(...r){B.set(this,L.get(this)[t](...r))}),n}};async function*Q(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const n=new Proxy(t,z);for(L.set(n,t),v.set(n,E(t));t;)yield n,t=await(B.get(n)||t.continue()),B.delete(n)}function P(e,t){return t===Symbol.asyncIterator&&D(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&D(e,[IDBIndex,IDBObjectStore])}T(e=>({...e,get(t,n,r){return P(t,n)?Q:e.get(t,n,r)},has(t,n){return P(t,n)||e.has(t,n)}}));async function X(e){await e.createObjectStore("todos",{keyPath:"id",autoIncrement:!0})}async function Y(){return await $("to-do-app-db",1,{upgrade:X})}const g=Y(),f={async add(e){const n=(await g).transaction("todos","readwrite");await n.objectStore("todos").add(e),await n.done},async getAll(){return(await g).transaction("todos","readonly").objectStore("todos").getAll()},async remove(e){const n=(await g).transaction("todos","readwrite");await n.objectStore("todos").delete(e),await n.done},async update(e){const n=(await g).transaction("todos","readwrite");await n.objectStore("todos").put(e),await n.done},async clear(){const t=(await g).transaction("todos","readwrite");t.objectStore("todos").clear(),await t.done}};function q(){const[e,t]=m.useState([]),n=m.useRef(null),[r,c]=m.useState("No record updates");m.useEffect(()=>{f.getAll().then(t)},[]);function i(d){d.preventDefault();const h={id:Date.now(),text:new FormData(d.target).get("todo-text").trim()};f.add(h).then(f.getAll).then(b=>{t(b),b.find(p=>p.id===h.id&&p.text===h.text)&&l("Added a to do item")})}const o=d=>()=>{f.remove(d.id).then(f.getAll).then(h=>{t(h),h.find(j=>j.id===d.id&&j.text===d.text)||l("Removed a to do item")})},u=d=>{f.update(d).then(f.getAll).then(t)},a=()=>f.clear().then(f.getAll).then(d=>{t(d),d.length===0&&l("Cleared all to do items")});function l(d){const h=new Date().toLocaleString();c(d+" at "+h)}return s.jsxs(s.Fragment,{children:[s.jsxs("header",{children:[s.jsx("h1",{children:"Frontend Portfolio"}),s.jsx(V,{}),s.jsx("img",{id:"logo",src:"/client-side-demos/todo.svg",alt:"Black check mark on Cyan"}),s.jsx("h2",{children:"To Do App"})]}),s.jsxs("main",{children:[s.jsx("p",{role:"status",ref:n,tabIndex:-1,children:r}),s.jsx(M,{onSubmit:i,inputName:"todo-text",buttonText:"Add"}),s.jsx("button",{onClick:a,children:"Clear All To Do Items"}),s.jsxs("article",{children:[s.jsx("h2",{children:"To Do List"}),s.jsx("ul",{children:e.map(d=>s.jsx(ee,{todo:d,todoRemover:o,todoUpdater:u},d.id))})]})]}),s.jsx("footer",{children:"Created by Zachary F w/ instruction from Nicholas Gardella 02/2025"})]})}function ee({todo:e,todoRemover:t,todoUpdater:n}){const r=m.useRef(null),{id:c,text:i}=e,[o,u]=m.useState(!1),a="updater-todo-text",l="Update",d=i,h=i;m.useEffect(()=>{o&&r.current&&r.current.focus()},[o]);function b(p){p.preventDefault();const F=new FormData(p.target).get(a).trim();n({id:c,text:F}),u(!1)}if(o)return s.jsx(M,{onSubmit:b,inputName:a,buttonText:l,placeholder:d,defaultValue:h,inputRef:r});function j(){u(!0)}return s.jsxs("li",{children:[s.jsx("input",{type:"checkbox"}),s.jsx("span",{children:i}),s.jsx("button",{onClick:t({id:c,text:i}),children:"Delete"}),s.jsx("button",{onClick:j,children:"Edit"})]})}function M({onSubmit:e,inputName:t,buttonText:n,placeholder:r="",defaultValue:c="",inputRef:i}){function o(u){const a=u.target;a.setCustomValidity(""),!a.validity.valid&&a.validity.patternMismatch&&a.setCustomValidity("Entry must not be all white spaces, or begin with a white space.")}return s.jsx("form",{onSubmit:e,children:s.jsxs("fieldset",{children:[s.jsx("legend",{children:"Add a to do item"}),s.jsx("label",{htmlFor:t,children:"Text Content"}),s.jsx("input",{type:"text",name:t,placeholder:r,defaultValue:c,required:!0,autoComplete:"off",pattern:"^(\\S+\\s*)+$",ref:i,onInvalid:o,onInput:o}),s.jsx("button",{type:"submit",children:n})]})})}R.createRoot(document.getElementById("root")).render(s.jsx(m.StrictMode,{children:s.jsx(q,{})}));
