import"./modulepreload-polyfill-B5Qt9EMX.js";import{c as V,j as o,r as m}from"./index-ByYvoH3u.js";const I=(t,e)=>e.some(n=>t instanceof n);let P,A;function F(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function O(){return A||(A=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const E=new WeakMap,D=new WeakMap,p=new WeakMap;function N(t){const e=new Promise((n,r)=>{const a=()=>{t.removeEventListener("success",c),t.removeEventListener("error",s)},c=()=>{n(x(t.result)),a()},s=()=>{r(t.error),a()};t.addEventListener("success",c),t.addEventListener("error",s)});return p.set(e,t),e}function W(t){if(E.has(t))return;const e=new Promise((n,r)=>{const a=()=>{t.removeEventListener("complete",c),t.removeEventListener("error",s),t.removeEventListener("abort",s)},c=()=>{n(),a()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",c),t.addEventListener("error",s),t.addEventListener("abort",s)});E.set(t,e)}let B={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return E.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return x(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function v(t){B=t(B)}function K(t){return O().includes(t)?function(...e){return t.apply(C(this),e),x(this.request)}:function(...e){return x(t.apply(C(this),e))}}function U(t){return typeof t=="function"?K(t):(t instanceof IDBTransaction&&W(t),I(t,F())?new Proxy(t,B):t)}function x(t){if(t instanceof IDBRequest)return N(t);if(D.has(t))return D.get(t);const e=U(t);return e!==t&&(D.set(t,e),p.set(e,t)),e}const C=t=>p.get(t);function $(t,e,{blocked:n,upgrade:r,blocking:a,terminated:c}={}){const s=indexedDB.open(t,e),l=x(s);return r&&s.addEventListener("upgradeneeded",i=>{r(x(s.result),i.oldVersion,i.newVersion,x(s.transaction),i)}),n&&s.addEventListener("blocked",i=>n(i.oldVersion,i.newVersion,i)),l.then(i=>{c&&i.addEventListener("close",()=>c()),a&&i.addEventListener("versionchange",u=>a(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const G=["get","getKey","getAll","getAllKeys","count"],H=["put","add","delete","clear"],g=new Map;function T(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(g.get(e))return g.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,a=H.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(a||G.includes(n)))return;const c=async function(s,...l){const i=this.transaction(s,a?"readwrite":"readonly");let u=i.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),a&&i.done]))[0]};return g.set(e,c),c}v(t=>({...t,get:(e,n,r)=>T(e,n)||t.get(e,n,r),has:(e,n)=>!!T(e,n)||t.has(e,n)}));const Z=["continue","continuePrimaryKey","advance"],L={},S=new WeakMap,k=new WeakMap,_={get(t,e){if(!Z.includes(e))return t[e];let n=L[e];return n||(n=L[e]=function(...r){S.set(this,k.get(this)[e](...r))}),n}};async function*z(...t){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...t)),!e)return;e=e;const n=new Proxy(e,_);for(k.set(n,e),p.set(n,C(e));e;)yield n,e=await(S.get(n)||e.continue()),S.delete(n)}function M(t,e){return e===Symbol.asyncIterator&&I(t,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&I(t,[IDBIndex,IDBObjectStore])}v(t=>({...t,get(e,n,r){return M(e,n)?z:t.get(e,n,r)},has(e,n){return M(e,n)||t.has(e,n)}}));async function J(t){await t.createObjectStore("todos",{keyPath:"id",autoIncrement:!0})}async function Q(){return await $("to-do-app-db",1,{upgrade:J})}const y=Q(),h={async add(t){const n=(await y).transaction("todos","readwrite");await n.objectStore("todos").add(t),await n.done},async getAll(){return(await y).transaction("todos","readonly").objectStore("todos").getAll()},async remove(t){const n=(await y).transaction("todos","readwrite");await n.objectStore("todos").delete(t),await n.done},async update(t){const n=(await y).transaction("todos","readwrite");await n.objectStore("todos").put(t),await n.done},async clear(){const e=(await y).transaction("todos","readwrite");e.objectStore("todos").clear(),await e.done}};function X(){const[t,e]=m.useState([]),n=m.useRef(null),[r,a]=m.useState("No record updates");m.useEffect(()=>{h.getAll().then(e)},[]);function c(d){d.preventDefault();const f={id:Date.now(),text:new FormData(d.target).get("todo-text").trim()};h.add(f).then(h.getAll).then(b=>{e(b),b.find(w=>w.id===f.id&&w.text===f.text)&&u("Added a to do item")})}const s=d=>()=>{h.remove(d.id).then(h.getAll).then(f=>{e(f),f.find(j=>j.id===d.id&&j.text===d.text)||u("Removed a to do item")})},l=d=>()=>{h.update(d).then(h.getAll).then(e)},i=()=>h.clear().then(h.getAll).then(d=>{e(d),d.length===0&&u("Cleared all to do items")});function u(d){const f=new Date().toLocaleString();a(d+" at "+f)}return o.jsxs(o.Fragment,{children:[o.jsxs("header",{children:[o.jsx("h1",{children:"Frontend Portfolio"}),o.jsxs("nav",{children:[o.jsx("a",{href:"../../",children:"Home"}),o.jsx("a",{href:"../about/",children:"About"}),o.jsx("a",{href:"../clock/",children:"Project 1: Clock"}),o.jsx("a",{href:"../project-2/",children:"Project 2: Date Button"}),o.jsx("a",{href:"../react/",children:"React Project: Animals List"}),o.jsx("a",{href:"./",children:"To Do List Project"})]}),o.jsx("img",{id:"logo",src:"/client-side-demos/todo.svg",alt:"Black check mark on Cyan"}),o.jsx("h2",{children:"To Do App"})]}),o.jsxs("main",{children:[o.jsx("p",{role:"status",ref:n,tabIndex:-1,children:r}),o.jsx(R,{onSubmit:c,inputName:"todo-text",buttonText:"Add"}),o.jsx("button",{onClick:i,children:"Clear All To Do Items"}),o.jsxs("article",{children:[o.jsx("h2",{children:"To Do List"}),o.jsx("ul",{children:t.map(d=>o.jsx(Y,{todo:d,todoRemover:s,todoUpdater:l},d.id))})]})]}),o.jsx("footer",{children:"Created by Zachary F w/ instruction from Nicholas Gardella 02/2025"})]})}function Y({todo:t,todoRemover:e,todoUpdater:n}){const r=m.useRef(null),{id:a,text:c}=t,[s,l]=m.useState(!1),i="updater-todo-text",u="Update",d=c,f=c;m.useEffect(()=>{s&&r.current&&r.current.focus()},[s]);function b(w){w.preventDefault(),new FormData(w.target).get(i).trim(),n({id:a,text:c}),l(!1)}if(s)return o.jsx(R,{onSubmit:b,inputName:i,buttonText:u,placeholder:d,defaultValue:f,inputRef:r});function j(){l(!0)}return o.jsxs("li",{children:[o.jsx("input",{type:"checkbox"}),o.jsx("span",{children:c}),o.jsx("button",{onClick:e({id:a,text:c}),children:"Delete"}),o.jsx("button",{onClick:j,children:"Edit"})]})}function R({onSubmit:t,inputName:e,buttonText:n,placeholder:r="",defaultValue:a="",inputRef:c}){function s(l){const i=l.target;i.setCustomValidity(""),!i.validity.valid&&i.validity.patternMismatch&&i.setCustomValidity("Entry must not be all white spaces, or begin with a white space.")}return o.jsx("form",{onSubmit:t,children:o.jsxs("fieldset",{children:[o.jsx("legend",{children:"Add a to do item"}),o.jsx("label",{htmlFor:e,children:"Text Content"}),o.jsx("input",{type:"text",name:e,placeholder:r,defaultValue:a,required:!0,autoComplete:"off",pattern:"^(\\S+\\s*)+$",ref:c,onInvalid:s,onInput:s}),o.jsx("button",{type:"submit",children:n})]})})}V.createRoot(document.getElementById("root")).render(o.jsx(m.StrictMode,{children:o.jsx(X,{})}));
