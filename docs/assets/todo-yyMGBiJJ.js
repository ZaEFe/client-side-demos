import"./useBootstrap-B5thChz7.js";import{j as s,c as R,r as m}from"./index-ByYvoH3u.js";const V=()=>s.jsx("nav",{className:"navbar navbar-expand-lg bg-dark",children:s.jsxs("div",{className:"container-fluid d-flex justify-content-between",children:[s.jsxs("div",{className:"d-flex align-items-center",children:[s.jsx("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:s.jsx("span",{className:"navbar-toggler-icon"})}),s.jsx("a",{className:"navbar-brand d-lg-none ms-2",href:"../",children:"Home Page"})]}),s.jsx("div",{className:"collapse navbar-collapse",id:"navbarNav",children:s.jsxs("ul",{className:"navbar-nav",children:[s.jsx("li",{className:"nav-item",children:s.jsx("a",{className:"nav-link active","aria-current":"page",href:"../",children:"Home"})}),s.jsx("li",{className:"nav-item",children:s.jsx("a",{className:"nav-link",href:"../about/",children:"About"})}),s.jsx("li",{className:"nav-item",children:s.jsx("a",{className:"nav-link",href:"../clock/",children:"Clock"})}),s.jsx("li",{className:"nav-item",children:s.jsx("a",{className:"nav-link",href:"../project-2/",children:"Date Button"})}),s.jsx("li",{className:"nav-item",children:s.jsx("a",{className:"nav-link",href:"../react/",children:"React: Animal List"})}),s.jsx("li",{className:"nav-item",children:s.jsx("a",{className:"nav-link",href:"../todo/",children:"To Do List"})}),s.jsx("li",{className:"nav-item",children:s.jsx("a",{className:"nav-link",href:"../simple_fetch/",children:"Simple Fetch API"})})]})}),s.jsx("a",{className:"navbar-brand ms-auto",href:"./",children:s.jsx("img",{src:"/logo.svg",alt:"Logo",width:"30",height:"24"})})]})}),D=(e,t)=>t.some(n=>e instanceof n);let S,C;function O(){return S||(S=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function W(){return C||(C=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const I=new WeakMap,w=new WeakMap,v=new WeakMap;function K(e){const t=new Promise((n,o)=>{const c=()=>{e.removeEventListener("success",i),e.removeEventListener("error",r)},i=()=>{n(x(e.result)),c()},r=()=>{o(e.error),c()};e.addEventListener("success",i),e.addEventListener("error",r)});return v.set(t,e),t}function H(e){if(I.has(e))return;const t=new Promise((n,o)=>{const c=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",r),e.removeEventListener("abort",r)},i=()=>{n(),c()},r=()=>{o(e.error||new DOMException("AbortError","AbortError")),c()};e.addEventListener("complete",i),e.addEventListener("error",r),e.addEventListener("abort",r)});I.set(e,t)}let N={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return I.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return x(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function T(e){N=e(N)}function U(e){return W().includes(e)?function(...t){return e.apply(E(this),t),x(this.request)}:function(...t){return x(e.apply(E(this),t))}}function _(e){return typeof e=="function"?U(e):(e instanceof IDBTransaction&&H(e),D(e,O())?new Proxy(e,N):e)}function x(e){if(e instanceof IDBRequest)return K(e);if(w.has(e))return w.get(e);const t=_(e);return t!==e&&(w.set(e,t),v.set(t,e)),t}const E=e=>v.get(e);function $(e,t,{blocked:n,upgrade:o,blocking:c,terminated:i}={}){const r=indexedDB.open(e,t),u=x(r);return o&&r.addEventListener("upgradeneeded",a=>{o(x(r.result),a.oldVersion,a.newVersion,x(r.transaction),a)}),n&&r.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),u.then(a=>{i&&a.addEventListener("close",()=>i()),c&&a.addEventListener("versionchange",l=>c(l.oldVersion,l.newVersion,l))}).catch(()=>{}),u}const G=["get","getKey","getAll","getAllKeys","count"],Z=["put","add","delete","clear"],y=new Map;function k(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(y.get(t))return y.get(t);const n=t.replace(/FromIndex$/,""),o=t!==n,c=Z.includes(n);if(!(n in(o?IDBIndex:IDBObjectStore).prototype)||!(c||G.includes(n)))return;const i=async function(r,...u){const a=this.transaction(r,c?"readwrite":"readonly");let l=a.store;return o&&(l=l.index(u.shift())),(await Promise.all([l[n](...u),c&&a.done]))[0]};return y.set(t,i),i}T(e=>({...e,get:(t,n,o)=>k(t,n)||e.get(t,n,o),has:(t,n)=>!!k(t,n)||e.has(t,n)}));const z=["continue","continuePrimaryKey","advance"],A={},B=new WeakMap,L=new WeakMap,J={get(e,t){if(!z.includes(t))return e[t];let n=A[t];return n||(n=A[t]=function(...o){B.set(this,L.get(this)[t](...o))}),n}};async function*Q(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const n=new Proxy(t,J);for(L.set(n,t),v.set(n,E(t));t;)yield n,t=await(B.get(n)||t.continue()),B.delete(n)}function P(e,t){return t===Symbol.asyncIterator&&D(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&D(e,[IDBIndex,IDBObjectStore])}T(e=>({...e,get(t,n,o){return P(t,n)?Q:e.get(t,n,o)},has(t,n){return P(t,n)||e.has(t,n)}}));async function X(e){await e.createObjectStore("todos",{keyPath:"id",autoIncrement:!0})}async function Y(){return await $("to-do-app-db",1,{upgrade:X})}const p=Y(),h={async add(e){const n=(await p).transaction("todos","readwrite");await n.objectStore("todos").add(e),await n.done},async getAll(){return(await p).transaction("todos","readonly").objectStore("todos").getAll()},async remove(e){const n=(await p).transaction("todos","readwrite");await n.objectStore("todos").delete(e),await n.done},async update(e){const n=(await p).transaction("todos","readwrite");await n.objectStore("todos").put(e),await n.done},async clear(){const t=(await p).transaction("todos","readwrite");t.objectStore("todos").clear(),await t.done}};function q(){const[e,t]=m.useState([]),n=m.useRef(null),[o,c]=m.useState("No record updates");m.useEffect(()=>{h.getAll().then(t)},[]);function i(d){d.preventDefault();const f={id:Date.now(),text:new FormData(d.target).get("todo-text").trim()};h.add(f).then(h.getAll).then(b=>{t(b),b.find(g=>g.id===f.id&&g.text===f.text)&&l("Added a to do item")})}const r=d=>()=>{h.remove(d.id).then(h.getAll).then(f=>{t(f),f.find(j=>j.id===d.id&&j.text===d.text)||l("Removed a to do item")})},u=d=>{h.update(d).then(h.getAll).then(t)},a=()=>h.clear().then(h.getAll).then(d=>{t(d),d.length===0&&l("Cleared all to do items")});function l(d){const f=new Date().toLocaleString();c(d+" at "+f)}return s.jsxs(s.Fragment,{children:[s.jsxs("header",{children:[s.jsx("h1",{children:"Frontend Portfolio"}),s.jsx(V,{}),s.jsx("img",{id:"logo",src:"/client-side-demos/todo.svg",alt:"Black check mark on Cyan"}),s.jsx("h2",{children:"To Do App"})]}),s.jsxs("main",{children:[s.jsx("p",{role:"status",ref:n,tabIndex:-1,children:o}),s.jsx(M,{onSubmit:i,inputName:"todo-text",buttonText:"Add"}),s.jsx("button",{onClick:a,children:"Clear All To Do Items"}),s.jsxs("article",{children:[s.jsx("h2",{children:"To Do List"}),s.jsx("ul",{children:e.map(d=>s.jsx(ee,{todo:d,todoRemover:r,todoUpdater:u},d.id))})]})]}),s.jsx("footer",{children:"Created by Zachary F w/ instruction from Nicholas Gardella 02/2025"})]})}function ee({todo:e,todoRemover:t,todoUpdater:n}){const o=m.useRef(null),{id:c,text:i}=e,[r,u]=m.useState(!1),a="updater-todo-text",l="Update",d=i,f=i;m.useEffect(()=>{r&&o.current&&o.current.focus()},[r]);function b(g){g.preventDefault();const F=new FormData(g.target).get(a).trim();n({id:c,text:F}),u(!1)}if(r)return s.jsx(M,{onSubmit:b,inputName:a,buttonText:l,placeholder:d,defaultValue:f,inputRef:o});function j(){u(!0)}return s.jsxs("li",{children:[s.jsx("input",{type:"checkbox"}),s.jsx("span",{children:i}),s.jsx("button",{onClick:t({id:c,text:i}),children:"Delete"}),s.jsx("button",{onClick:j,children:"Edit"})]})}function M({onSubmit:e,inputName:t,buttonText:n,placeholder:o="",defaultValue:c="",inputRef:i}){function r(u){const a=u.target;a.setCustomValidity(""),!a.validity.valid&&a.validity.patternMismatch&&a.setCustomValidity("Entry must not be all white spaces, or begin with a white space.")}return s.jsx("form",{onSubmit:e,children:s.jsxs("fieldset",{children:[s.jsx("legend",{children:"Add a to do item"}),s.jsx("label",{htmlFor:t,children:"Text Content"}),s.jsx("input",{type:"text",name:t,placeholder:o,defaultValue:c,required:!0,autoComplete:"off",pattern:"^(\\S+\\s*)+$",ref:i,onInvalid:r,onInput:r}),s.jsx("button",{type:"submit",children:n})]})})}R.createRoot(document.getElementById("root")).render(s.jsx(m.StrictMode,{children:s.jsx(q,{})}));
